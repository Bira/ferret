<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: Ferret::Store::Directory</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">Ferret::Store::Directory</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../../files/lib/store/directory_rb.html">
                lib/store/directory.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
A <a href="Directory.html">Directory</a> is an object which is used to
access the index storage. Ruby&#8217;s IO API is not used so that we can
use different storage mechanisms to store the index. Some examples are;
</p>
<ul>
<li>File system based storage

</li>
<li>RAM based storage

</li>
<li>Database based storage

</li>
</ul>
<p>
NOTE: Once a file has been written and closed, it can no longer be
modified. To make any changes to the file it must be deleted and rewritten.
For this reason, the method to open a file for writing is called <em><a
href="Directory.html#M000138">create_output</a></em>, while the method to
open a file for reading is called <em><a
href="Directory.html#M000139">open_input</a></em> If there is a risk of
simultaneous modifications of the files then locks should be used. See <a
href="Lock.html">Lock</a> to find out how.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000141">close</a>&nbsp;&nbsp;
      <a href="#M000138">create_output</a>&nbsp;&nbsp;
      <a href="#M000135">delete</a>&nbsp;&nbsp;
      <a href="#M000130">each</a>&nbsp;&nbsp;
      <a href="#M000132">exists?</a>&nbsp;&nbsp;
      <a href="#M000131">file_count</a>&nbsp;&nbsp;
      <a href="#M000137">length</a>&nbsp;&nbsp;
      <a href="#M000140">make_lock</a>&nbsp;&nbsp;
      <a href="#M000133">modified</a>&nbsp;&nbsp;
      <a href="#M000139">open_input</a>&nbsp;&nbsp;
      <a href="#M000136">rename</a>&nbsp;&nbsp;
      <a href="#M000134">touch</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000141" class="method-detail">
        <a name="M000141"></a>

        <div class="method-heading">
          <a href="#M000141" class="method-signature">
          <span class="method-name">close</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Closes the store.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000141-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000141-source">
<pre>
    <span class="ruby-comment cmt"># File lib/store/directory.rb, line 81</span>
81:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">close</span>
82:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>
83:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000138" class="method-detail">
        <a name="M000138"></a>

        <div class="method-heading">
          <a href="#M000138" class="method-signature">
          <span class="method-name">create_output</span><span class="method-args">(file_name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates a new, empty file in the directory with the given name. Returns a
stream writing this file.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000138-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000138-source">
<pre>
    <span class="ruby-comment cmt"># File lib/store/directory.rb, line 66</span>
66:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_output</span>(<span class="ruby-identifier">file_name</span>)
67:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>
68:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000135" class="method-detail">
        <a name="M000135"></a>

        <div class="method-heading">
          <a href="#M000135" class="method-signature">
          <span class="method-name">delete</span><span class="method-args">(file)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Removes an existing file in the directory.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000135-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000135-source">
<pre>
    <span class="ruby-comment cmt"># File lib/store/directory.rb, line 48</span>
48:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete</span>(<span class="ruby-identifier">file</span>)
49:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>
50:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000130" class="method-detail">
        <a name="M000130"></a>

        <div class="method-heading">
          <a href="#M000130" class="method-signature">
          <span class="method-name">each</span><span class="method-args">(</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
returns an array of strings, one for each file in the directory
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000130-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000130-source">
<pre>
    <span class="ruby-comment cmt"># File lib/store/directory.rb, line 21</span>
21:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">each</span> <span class="ruby-comment cmt"># :yeilds: file_name</span>
22:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>
23:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000132" class="method-detail">
        <a name="M000132"></a>

        <div class="method-heading">
          <a href="#M000132" class="method-signature">
          <span class="method-name">exists?</span><span class="method-args">(file)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if a file with the given name exists.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000132-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000132-source">
<pre>
    <span class="ruby-comment cmt"># File lib/store/directory.rb, line 33</span>
33:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">file</span>)
34:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>
35:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000131" class="method-detail">
        <a name="M000131"></a>

        <div class="method-heading">
          <a href="#M000131" class="method-signature">
          <span class="method-name">file_count</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
returns the number of files in the directory
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000131-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000131-source">
<pre>
    <span class="ruby-comment cmt"># File lib/store/directory.rb, line 26</span>
26:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">file_count</span>() 
27:         <span class="ruby-identifier">i</span> = <span class="ruby-value">0</span>
28:         <span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>}
29:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">i</span>
30:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000137" class="method-detail">
        <a name="M000137"></a>

        <div class="method-heading">
          <a href="#M000137" class="method-signature">
          <span class="method-name">length</span><span class="method-args">(file)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the length of a file in the directory.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000137-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000137-source">
<pre>
    <span class="ruby-comment cmt"># File lib/store/directory.rb, line 60</span>
60:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">length</span>(<span class="ruby-identifier">file</span>)
61:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>
62:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000140" class="method-detail">
        <a name="M000140"></a>

        <div class="method-heading">
          <a href="#M000140" class="method-signature">
          <span class="method-name">make_lock</span><span class="method-args">(lock_name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Construct a <a href="Lock.html">Lock</a>.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000140-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000140-source">
<pre>
    <span class="ruby-comment cmt"># File lib/store/directory.rb, line 76</span>
76:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">make_lock</span>(<span class="ruby-identifier">lock_name</span>)
77:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>
78:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000133" class="method-detail">
        <a name="M000133"></a>

        <div class="method-heading">
          <a href="#M000133" class="method-signature">
          <span class="method-name">modified</span><span class="method-args">(file)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the time the named file was last modified.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000133-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000133-source">
<pre>
    <span class="ruby-comment cmt"># File lib/store/directory.rb, line 38</span>
38:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">modified</span>(<span class="ruby-identifier">file</span>)
39:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>
40:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000139" class="method-detail">
        <a name="M000139"></a>

        <div class="method-heading">
          <a href="#M000139" class="method-signature">
          <span class="method-name">open_input</span><span class="method-args">(file_name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a stream reading an existing file.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000139-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000139-source">
<pre>
    <span class="ruby-comment cmt"># File lib/store/directory.rb, line 71</span>
71:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">open_input</span>(<span class="ruby-identifier">file_name</span>)
72:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>
73:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000136" class="method-detail">
        <a name="M000136"></a>

        <div class="method-heading">
          <a href="#M000136" class="method-signature">
          <span class="method-name">rename</span><span class="method-args">(from, to)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Renames an existing file in the directory. If a file already exists with
the new name, then it is replaced. This replacement should be atomic.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000136-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000136-source">
<pre>
    <span class="ruby-comment cmt"># File lib/store/directory.rb, line 55</span>
55:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rename</span>(<span class="ruby-identifier">from</span>, <span class="ruby-identifier">to</span>)
56:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>
57:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000134" class="method-detail">
        <a name="M000134"></a>

        <div class="method-heading">
          <a href="#M000134" class="method-signature">
          <span class="method-name">touch</span><span class="method-args">(file)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Set the modified time of an existing file to now.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000134-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000134-source">
<pre>
    <span class="ruby-comment cmt"># File lib/store/directory.rb, line 43</span>
43:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">touch</span>(<span class="ruby-identifier">file</span>)
44:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>
45:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>